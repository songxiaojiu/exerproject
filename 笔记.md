[TOC]



### Git

​			作者：kerwin

​			版本：QF1.0

​			版权：千锋HTML5大前端教研院

​			公众号: 大前端私房菜

​       

#### 一. 走入Git

##### 1.Git介绍

> Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。
>
> Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。



- 版本控制

  版本控制（Revision control）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。

- 团队协作

  从单兵作战转换为团队开发。

##### 2.Git对比SVN

<img src="%E7%AC%94%E8%AE%B0.assets/image-20220907110331660.png" alt="image-20220907110331660" style="zoom:67%;" />



1. SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己的代码推送到中央服务器。集中式版本控制系统是必须联网才能工作。

   >  注:可对文件进行管理,可加锁,很少出现冲突,有子目录权限控制

2. Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己电脑上，可以离线工作。

   >  注:对代码进行管理




##### 3.Git安装

> https://git-scm.com/

<img src="%E7%AC%94%E8%AE%B0.assets/image-20220907110802124.png" alt="image-20220907110802124" style="zoom:50%;float:left" />

- 下载好以后，直接双击进行安装就行

- 一直下一步就可以，安装再默认路径就行

- 安装完毕后检测一下安装是否成功

  1. 方法一： 打开 `cmd` 窗口，输入指令检查

     ```shell
     # 检测 git 是否安装
     $ git --version
     ```

     - 出现版本号，说明安装成功

       ![](../../../JS/bak/13_BK_H5_2114/07_%25E7%25AC%25AC%25E4%25B8%2583%25E5%2591%25A8/05_DAY/01_%25E8%25B5%2584%25E6%2596%2599/assets/git%25E5%25AE%2589%25E8%25A3%2585%25E6%25A3%2580%25E6%25B5%258B1.png)

  2. 方法二： 随便找个地方单机 **鼠标右键**，出现下图内容，说明安装成功

     ![](../../../JS/bak/13_BK_H5_2114/07_%25E7%25AC%25AC%25E4%25B8%2583%25E5%2591%25A8/05_DAY/01_%25E8%25B5%2584%25E6%2596%2599/assets/git%25E5%25AE%2589%25E8%25A3%2585%25E6%25A3%2580%25E6%25B5%258B2.png)

- 安装完毕，接下来我们就可以开始使用了



#### 二.Git常用命令

##### 1.设置用户签名

> 签名的作用就是用来标识用户，以区分不同的开发人员。
>
> 注:名字可以随便起,不影响,可以写成自己常用的

```shell
  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"
```



##### 2.初始化本地库

​     前奏:

```shell
# 进入当前目录:
cd hello/
# 回到上一级 :
cd..    
```

​          

- 我们希望一个文件夹被 `git` 管理的话，那么就要在一个文件夹下进行 **git 初始化**

- 找到一个希望被 `git` 管理的文件夹

- 在文件夹内单击鼠标右键，点开 `Git Bash Here`

- 输入指令

  ```shell
  # git 初始化的指令
  $ git init
  ```

- 然后文件夹内会多一个 `.git` 的文件夹（这个文件夹是一个隐藏文件夹）

  > **注:1.如没有.git文件夹可点开查看->选项->查看->将显隐藏文件夹选上即可**
  >
  > ​     **2.如果想将多个目录分门别类管理,在当前想要被管理的目录进行输入指令操作即可**  

- 这个时候，我的这个 `git_demo` 文件夹就被 `git` 管理了

  - `git` 不光管理这一个文件夹，包括所有的子文件夹和子文件都会被管理

- 注意： **只有当一个文件夹被 git 管理以后，我们才可以使用 git 的功能去做版本管理**

  - 也就是说，我们必须要把我们电脑中的某一个文件夹授权给 `git`
  - `git` 才能对这个文件夹里面的内容进行各种操作
  - 而 `git init` 就是在进行这个授权的操作



##### 3.Git工作区、暂存区和版本库

![image-20220907112424167](%E7%AC%94%E8%AE%B0.assets/image-20220907112424167.png)



**托管平台**

- 局域网(内网)

  > 说明:不想要其他人看到时

  - gitlab

- 公网（外网）

  > 可设置为共公有项目和私有项目

  - gitlab
  - github:不是中文,有时候上传下载比较慢
  - gitee 码云:中国的上传下载快

##### 4.git add

补充:了解即可

>  vim 1.txt ->i ->输入内容 ->esc键->wq(保存并退出)



- 我们要放入暂存区，要使用 `git add` 指令

- 把单独一个文件放在暂存区

  > 警告：在 '1.txt' 的工作副本中，下次 Git 触摸 LF 时，LF 将被 CRLF 替换
  >
  > 绿色的代表在暂存区,红色代表在工作区

  ```shell
  # 把文件夹下的 index.txt 文本放在暂存区
  $ git add index.txt
  ```

- 把单独一个文件夹放在暂存区（暂存区不能存放空文件夹）

  ```shell
  # 把文件夹下的 ceshi文件夹 放在暂存区
  $ git add ceshi/
  ```

- 把所有文件都放在暂存区

  ```shell
  # 把文件夹下所有的内容都放在暂存区
  $ git add --all
  
  # git add --all 有一个简单的写法
  $ git add .
  ```

  - 全部存放的时候使用上面两个指令哪个都行

##### 5.git commit

> 注:描述信息也可不加引号

```shell
# 把暂存区的内容放到历史区
$ git commit -m "我是第一个版本"

$ git status
  On branch master
  nothing to commit, working tree clean

```

> git  commit:忘记写提交信息时,会出现提示,让其添加修改的提交描述,此时会进入vim模式,进行相应修改并退出即可,写提交描述时记得不要加#,否则不会生效.

- 我们使用 `git log` 这个指令查看版本信息


```shell
# 查看当前历史区版本信息(更清晰些)
$ git log
```

> 注:git add  . :后面的.会自动将修改的文件放到暂缓区(会自动识别修改的文件)
>
> 通过 git status 可查看修改的原因


- 我们使用 `git reset --hard 版本编号` 进行历史回退

  > 注:回退到上一个版本,之前的还在
  >
  > head:表示当前指针指向的位置
  >
  > head ^ 退一个  |   ^^ 退两个
  >
  > git除了接head,还可接标识符(最前面)

  ```shell
  # 回退到上一次提交的版本
  $ git reset --hard HEAD^
  
  # 回退到上上次提交的版本
  $ git reset --hard HEAD^^
  $ git reset --hard HEAD~2
  # 可以看到所有的操作记录
  $ git reflog
  ```

> 面试点2:git log 和git reflog的区别
>
> 前者可查看当前历史区版本信息(更清晰些),后者可以看到所有的操作记录(有点繁杂)

<img src="%E7%AC%94%E8%AE%B0.assets/image-20220908074740564.png" alt="image-20220908074740564" style="zoom:67%;float:left" />





> 注:head(指针)和master(主分支)指向最近一次记录操作
>
> git bash出现冒号:是因为记录太长了,按Q即可

> 面试点1: --hard  --soft区别
>
> ​     --hard会直接从master->跳到工作区
>
> ​     --soft:直接从master->回到暂存区了



> ​     --soft的作用:
>
> ​     1.可以进行注释的重写,重新写提交记录
>
> ​     2.可合并相同功能的代码,使历史记录看起来更整洁
>
> ​        eg:修复的代码和之前的代码一起提交,只在历史记录中留一条相关记录 

##### 6.git revert 与 git reset(面试点3,有些难懂)

![image-20220908075826032](%E7%AC%94%E8%AE%B0.assets/image-20220908075826032.png)


- git reset 是回滚到对应的commit-id，相当于是删除了commit-id以后的所有的提交，并且不会产生新的commit-id记录，如果要推送到远程服务器的话，需要强制推送-f(比较危险)

- git revert 是反做撤销其中的commit-id，然后重新生成一个commit-id。本身不会对其他的提交commit-id产生影响，如果要推送到远程服务器的话，就是普通的操作git push就好了

  > revert HEAD:撤销这一次操作
  >
  > reset  HEAD:重置到当前指针上
  >
  > 有^号的为上一次操作
  >
  > 相同点:工作区会回到相应的的版本,但是log显示不一样

#### 三. Git 分支

##### 1.初识分支

- `git` 分支，就是我们自己把我们的整个文件夹分成一个一个独立的区域
- 比如我在开发 **登录** 功能的时候，可以放在 `login` 分支下进行开发

  - 开发 **列表** 功能的时候，可以放在 `list` 分支下进行开发
  - 大家互不干扰，每一个功能都是一个独立的功能分支
- 这样开发就会好很多
- `git` 在初始化的时候，会自动生成一个分支，叫做 `master` 
- 是表示主要分支的意思
- 我们就可以自己开辟出很多独立分支

##### 2.创建分支

- 开辟一个分支使用 `git branch 分支名称` 指令

  ```shell
  # 开辟一个 login 分支
  $ git branch login
  ```

- 查看一下当前分支情况

  ```shell
  # 查看当前分支情况
  $ git branch
  ```

  - 会看到，当前有两个分支了
  - 一个是 `master`，一个是 `login`
  - 前面有个 `*` 号，并且有高亮显示的，表示你当前所处的分支

##### 3.切换分支

- 我们对 **登录** 功能的开发要移动到 `login` 分支去完成

- 我们切换所处分支使用 `git checkout 分支名称`

  ```shell
  # 切换到 login 分支
  $ git checkout login
  ```

- 然后我们在整个分支上进行 **登录** 功能的开发

- 开发完毕以后，我们就在当前分支上进行提交

- 提交以后我们进行分支切换

  - 发现 `master` 上面还是最初始的状态
  - 而 `login` 分支上有我们新写的 **登录** 功能的代码

- 我们按照分支把所有功能都开发完毕了以后

  - 只要把所有代码都合并到 `master` 主分支上就行了

##### 4.合并分支

- `git` 的合并分支，只能是把别的分支的内容合并到自己的分支上

- 使用的指令是 `git merge`

  > merge(合并):可将head指针往前指
  >
  > 两分支对同一文件进行修改时,会产生冲突,此时需要手动进行修改
  >
  > > 注:冲突解决后,记的先git add .,再git commit,否则会报错,不过会有修改的方法提示

  

  ```shell
  # 切换到 master 分支
  $ git checkout master

  # 把 login 的内容合并到自己的分支
  $ git merge login
  ```

- 这个时候，我们刚才在 `login` 上开发的东西就都来到了 `master` 主分支上

- 如果是有多个分支的话，那么所有的最后都合并到 `master` 分支上的时候

- 我们的主分支上就有完整网站的所有页面

  - 各个分支上都是单独的页面和功能

##### 5.删除分支

- 这个时候我们开辟的分支就没有什么用了，就可以删除分支了

  1. 先切换到别的分支

  2. 使用指令 `git branch -d 分支名称` 来删除

     ```shell
     # 先切换到别的分支
     $ git checkout master
     
     # 删除 login 分支(d-delete)
     $ git branch -d login
     ```



#### 四.远程仓库

- 我们的所有内容已经全部保留在了本地历史区
- 理论上是不会丢失了
  - 但是如果把文件夹删除了，还是没有了
- 所以我们要使用 `git` 把我们所有的内容推送到 `github` 上面保存起来
- 那么就本地文件夹就算删除了，那么远程上面还有一份，还可以拿回来使用
- 所以我们现在就要把本地内容推送到远程
- 这个时候我们接需要一个 `github` 的账号了
- 先去 [github官网](https://github.com/) 注册一个账号



##### 1.创建一个远程仓库

- 有了 `github`  账号以后

- 我们就登录 `github` 网站，开辟一个远程仓库

- `github` 的远程也是以一个仓库一个仓库的形式来保存代码

  - 我们可以在一个 `github` 上保存很多的项目
  - 只要一个项目一个仓库就可以了

- 按照下面步骤开辟仓库

  1. 先点击新建仓库

     ![](%E7%AC%94%E8%AE%B0.assets/github%E5%BC%80%E8%BE%9F%E4%BB%93%E5%BA%931.png)




##### 2.添加仓库地址

- 接下来，要使用 `git` 上传代码了

- 我们先要告诉 `git` 上传到哪里

- 也就是给 `git` 添加一个上传的地址

- 我们还是来到我们的项目文件夹

- 使用 `git remote add origin 仓库地址` 来添加

  ```shell
  # 在项目文件夹下打开 git base
  # 添加仓库地址
  $ git remote add origin *********************
  # 查看是否添加进去
  $ git remote -v  
  ```
  
  - remote：远程的意思
  
  - add：添加的意思  |可用remove 名字(删除添加的远程地址) 
  
  - origin：是一个变量名（就是指*代后面一长串的地址*,即地址的别名）
  
    >  注:可以随便取,别跟注册名太像



##### 3.git push

- 上传到哪里的地址我们已经添加好了

- 接下来就是上传内容了

  - 上传要保证 **历史区** 里面有内容
  - 上传的过程会把 **历史区** 里面所有的内容上传到远端

- 我们使用 `git push` 指令来上传

  ```shell
  ># 上传内容
  $ git push -u origin master
  # 表示把内容上传到 origin 这个地址
  # master 是上传到远程的 master 分支
  ```

  > 查看所有分支(包括远程分支)
  >
  > 注:git branch (查看的是本地分支)
  
  ![image-20230321095340095](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321095340095.png)
  
  
  
  - 如果当前分支与多个主机存在追踪关系，则可以使用-**u选项**指定一个**默认主机**，这样后面就可以不加任何参数使用git push。


- 第二次上传

  - 第二次上传的时候，因为有刚才的记录，就不需要再写 `origin` 和 `master` 了

  - 会默认传递到 `origin` 这个地址的 `master` 分支上

  - 除非你要传递到别的分支上的时候再进行书写

    ```shell
    # 第二次上传
    $ git push
    ```

- 到这里，就完成了一次 `git` 推送

- 这个时候本地的文件夹就真的可以删除了

- 因为远程有一份我们的内容，本地的删除了，可以直接把远程的拉回来就行

  > 成功显示:
  >
  > ![](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321094216030.png)
  >
  > 注:从本地的master分支->远程的master分支
  >
  > @遗留问题:![image-20230321094421436](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321094421436.png)

> 注:尽量不要在远程仓库上修改代码

<img src="C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321113519769.png" alt="image-20230321113519769" style="zoom:80%;" />

##### 4.git clone

> 克隆只能克隆主分支

- `git` 克隆是指把远程仓库里面的内容克隆一份到本地

- 可以克隆别人的 **公开** 的仓库，也可以克隆自己的仓库

- 克隆别人的仓库，我们只能拿下来用，修改后不能从新上传

- 克隆自己的仓库，我们修改后还可以再次上传更新


- 输入克隆指令 `git clone 仓库地址`

  ```shell
  # 直接克隆仓库
  $ git clone *************
  ```

> 克隆不了的问题:可能跟网络问题有关,也可设置SSH
>
> 链接:https://blog.csdn.net/sinat_24948419/article/details/106925392



> 附: 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

​          https://github.com/songxiaojiu/exerproject.git

##### 5.git pull

- 当人家的代码更新以后，你想获得最新的代码

- 我们不需要从新克隆

- 只要拉取一次代码就可以了

- 直接在项目文件夹里面使用指令下拉

  ```shell
  # 拉取远程最新代码
  $ git pull
  ```

- 这样一来，你本地的仓库就可远程的仓库同步了(拉取后还会合并代码)

  >  注:
  >
  >  1.推送之前记得先拉取远程仓库最新的代码,不然也会提示你拉取
  >
  >  2.当用同一个账号修改不同文件夹里内容时,克隆可以,也可以推送,但在实际团队开发中,是用不同账号推   送到远程仓库的,推送时是会报错的,需要进行验证
  >
  > 

> 解决方案如下:需让仓库的创作者邀请某个成员,生成邀请链接,对方同意邀请后即可进行push
>
> ![image-20230321192955832](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321192955832.png)



> ![image-20230321200124768](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321200124768.png)
>
> 遇到此问题的解决方案:[(64条消息) Git提示Connection was reset, errno 10054解决方法_天涯各一方&的博客-CSDN博客](https://blog.csdn.net/loulansd/article/details/121844302)



>  分支知识补充:
>
> 一般需要有的分支为dev  test  product分支
>
> 向远程添加分支: git push origin login:login
>
> 本地login->远程login:git push  origin login
>
> ![](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321202710351.png)
>
> 查看分支:
>
> ![image-20230321202930694](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321202930694.png)

> 注:如果此时自己没有某个分支,可通过 git pull origin login 获取新的分支,然后通过 git checkout login 即可获取该分支并进行相关操作 
>
> ![image-20230321203357030](C:/Users/小宋。/AppData/Roaming/Typora/typora-user-images/image-20230321203357030.png)



> 删除远程分支的方法:

 - ```shell
   # 说明:让空去覆盖这个分支,即可删除远程分支
   $ git push origin  :bugfixed
     To https://github.com/songxiaojiu/exerproject.git
    - [deleted]         bugfixed
   ```

   

#### 五.VScode集成Git

VSCode内置版本控制机制，并自带对Git和Github的支持，你也可以安装插件以支持其他控制软件，如SVN(需要先安装 SVN )等。

1. 初始化

   <img src="%E7%AC%94%E8%AE%B0.assets/image-20220910091354495.png" alt="image-20220910091354495" style="zoom:50%;float:left;" />

2. 可视化界面管理项目
    <img src="%E7%AC%94%E8%AE%B0.assets/image-20220910091438534.png" alt="image-20220910091438534" style="zoom:67%;float:left;" />



#### 六. gitignore

> 在一些项目中，我们不想让本地仓库的所有文件都上传到远程仓库中，而是有选择的上传，比如：一些依赖文件（node_modules下的依赖）、bin 目录下的文件、测试文件等。一方面将一些依赖、测试文件都上传到远程传输量很大，另一方面，一些文件对于你这边是可用的，在另一个人那可能就不可用了，比如：本地配置文件。



- 空行不匹配任何文件；

- 如果本地仓库文件已被跟踪，那么即使在 .gitignore 中设置了忽略，也不起作用。

- .gitignore 文件也会被上传的到远程仓库，所以，同一个仓库的人可以使用同一个.gitignore 文件。

```js
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.
# dependencies
# #开头的便是注释

# 忽略文件和目录
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

# 使用通配符
npm-debug.log*
yarn-debug.log*
yarn-error.log*   

```

#### 七.跨团队协作

